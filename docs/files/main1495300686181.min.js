!function(e){function t(o){if(n[o])return n[o].exports;var u=n[o]={exports:{},id:o,loaded:!1};return e[o].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var u=n(11),a=o(u),r=n(3),i=n(2),l=n(26),c=o(l),d=n(24),f=o(d);n(30),(0,i.getUserMedia)().then(function(e){function t(e,t){if("width"===e)n.updateConfig({height:Math.round(.75*t),width:t});else{var u;n.updateConfig((u={},u[e]=t,u))}o.updateConfig()}var n=(0,a.default)(r.config),o=(0,c.default)(n,e),u=Object.keys(r.schema).map(function(e){return r.schema[e]}),l=(0,f.default)(u,t);document.body.appendChild(o.el),document.body.appendChild(l.el),(0,i.interval)(o.updateMotion)})},function(e,t){e.exports=function(e){function t(o){if(n[o])return n[o].exports;var u=n[o]={exports:{},id:o,loaded:!1};return e[o].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++)t(e[n[o]],n[o])}function u(e){return e&&(e.nodeName&&e.nodeType||e instanceof Text)}function a(){function e(e){for(var a=void 0,c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];if("string"==typeof e){var s=e.split("."),v=s[0],p=s.slice(1);a=document.createElement(""===v?"div":v),p.length&&(a.className=p.join(" "))}else a=document.createElement("div"),void 0!==e&&d.unshift(e);return n(d,function(e){Array.isArray(e)?n(e,function(e){return a.appendChild(u(e)?e:document.createTextNode(e))}):u(e)?a.appendChild(e):null!==e&&"object"===("undefined"==typeof e?"undefined":r(e))?o(e,function(e,n){"function"==typeof e?(a.addEventListener(n.substring(i),e,!1),t.push(function(){return a.removeEventListener(n.substring(i),e,!1)})):"style"===n?"string"==typeof e?a.style.cssText=e:o(e,function(e,t){var n=e.match(l);n?a.style.setProperty(t,n[1],"important"):a.style.setProperty(t,e)}):"attrs"===n?o(e,function(e,t){return a.setAttribute(t,e)}):a[n]=e}):a.appendChild(document.createTextNode(e))}),a}var t=[];return e.cleanup=function(){n(t,function(e){return e()}),t.length=0},e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=2,l=/(.*)\W+!important\W*$/;e.exports=a(),e.exports.context=a}])},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.hexToRgb=t.screenshot=t.getUserMedia=t.interval=void 0;var u=n(14),a=o(u),r=n(12),i=o(r),l=n(17),c=o(l),d=n(13),f=o(d);t.interval=a.default,t.getUserMedia=i.default,t.screenshot=c.default,t.hexToRgb=f.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return l.default[t].key=t,e[t]=l.default[t].value,e}t.__esModule=!0,t.config=t.schema=void 0;var a=n(4),r=o(a),i=n(5),l=o(i),c=(0,r.default)(),d=c.minWidth,f=c.maxWidth,s=c.minHeight,v=c.maxHeight,p=c.width,h=c.height;l.default.width.min=d,l.default.width.max=f,l.default.width.value=p,l.default.height.min=s,l.default.height.max=v,l.default.height.value=h;var m=Object.keys(l.default).reduce(u,{});t.schema=l.default,t.config=m},function(e,t){"use strict";function n(){var e=window.innerWidth-a,t=window.innerHeight-a;return e*u>t?e=Math.round(t/u):t=Math.round(e*u),{minWidth:Math.round(e*o),maxWidth:e,width:e,minHeight:Math.round(t*o),maxHeight:t,height:t}}t.__esModule=!0,t.default=n;var o=.1,u=.75,a=0},function(e,t){"use strict";t.__esModule=!0,t.default={width:{label:"Video width",type:"range",min:128,max:640,value:640},height:{label:"Video height",type:"range",min:96,max:480,value:480,hidden:!0},motionDetection:{label:"Detect motion",type:"boolean",value:!0},differ:{label:"Motion precision",type:"list",value:2,options:[{value:1,label:"Rectangle"},{value:2,label:"Pixel"}]},color:{label:"Motion color",type:"color",value:"#00ff00"},quality:{label:"Comparison inaccuracy",type:"range",min:1,max:20,value:10},colorTolerance:{label:"Color noise tolerance",type:"range",min:0,max:255,value:40},timeTolerance:{label:"Motion pause tolerance",type:"range",min:1,max:1e3,value:300},compareCanvas:{label:"Show compare canvas",type:"boolean",value:!1,hidden:!0}}},function(e,t,n){"use strict";function o(){return Object.assign({},u.config)}t.__esModule=!0,t.default=o;var u=n(3)},function(e,t){"use strict";function n(){return{isInMotion:!1,lastStatic:performance.now(),lastMotion:performance.now(),changedData:{}}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,o){return c[o](e,t,n)}t.__esModule=!0,t.default=u;var a=n(10),r=o(a),i=n(9),l=o(i),c={1:r.default,2:l.default}},function(e,t){"use strict";function n(e,t,n){function r(){v=[]}function i(e){return e>d||e<-d}function l(e,t){v.push(e*c,t*c)}var c=e.quality,d=e.colorTolerance,f=t*o,s=f*n,v=void 0;return function(e,t){r();for(var n=0;n<s;n+=o)(i(e[n]-t[n])||i(e[n+a]-t[n+a])||i(e[n+u]-t[n+u]))&&l(n%f/o,Math.floor(n/f));return{changed:v.length>0,pixels:v}}}t.__esModule=!0,t.default=n;var o=4,u=2,a=1},function(e,t){"use strict";function n(e,t,n){function r(){v=1/0,p=0,h=1/0,m=0,_=!1}function i(e){return e>d||e<-d}function l(e,t){e<h&&(h=e),e>m&&(m=e),t<v&&(v=t),t>p&&(p=t)}var c=e.quality,d=e.colorTolerance,f=t*o,s=f*n,v=void 0,p=void 0,h=void 0,m=void 0,_=void 0;return function(e,t){r();for(var n=0;n<s;n+=o)(i(e[n]-t[n])||i(e[n+a]-t[n+a])||i(e[n+u]-t[n+u]))&&(_=!0,l(n%f/o,Math.floor(n/f)));return{top:v*c,left:h*c,height:(p-v)*c,width:(m-h)*c,changed:_}}}t.__esModule=!0,t.default=n;var o=4,u=2,a=1},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(){function e(e){Object.assign(c,e),v=Math.floor(c.width/c.quality),p=Math.floor(c.height/c.quality),u.width=v,u.height=p,s=(0,r.default)(c,v,p,c.differ)}function t(e){return a.clearRect(0,0,v,p),a.drawImage(e,0,0,v,p),a.getImageData(0,0,v,p).data}function n(e){var n=t(e),o=s(f,n),u=performance.now();return o.changed?u-i.lastStatic>c.timeTolerance&&(i.isInMotion=!0,i.lastMotion=u):u-i.lastMotion>c.timeTolerance&&(i.isInMotion&&(i.lastStatic=u),i.isInMotion=!1),f=n,i.changedData=o,i}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=document.createElement("canvas"),a=u.getContext("2d"),i=(0,l.default)(),c=(0,d.default)(),f=void 0,s=void 0,v=void 0,p=void 0;return e(o),f=a.getImageData(0,0,v,p).data,{updateConfig:e,compareFrame:n,compareCanvas:u,getState:function(){return i},getConfig:function(){return c}}}t.__esModule=!0,t.default=u;var a=n(8),r=o(a),i=n(7),l=o(i),c=n(6),d=o(c)},function(e,t){"use strict";function n(e){return function(t){return e((window.URL||window.webkitURL).createObjectURL(t))}}function o(){return navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(u):navigator.getUserMedia?new Promise(function(e,t){return navigator.getUserMedia(u,e,t)}):navigator.webkitGetUserMedia?new Promise(function(e,t){return navigator.webkitGetUserMedia(u,n,t)}):navigator.mozGetUserMedia?new Promise(function(e,t){return navigator.mozGetUserMedia(u,n,t)}):Promise.reject(Error("Can not get user media."))}t.__esModule=!0,t.default=o;var u={video:!0}},function(e,t){"use strict";function n(e){return{R:parseInt(e[1]+e[2],16),G:parseInt(e[3]+e[4],16),B:parseInt(e[5]+e[6],16)}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e){function t(){cancelAnimationFrame(o)}function n(){o=requestAnimationFrame(n),e()}var o=requestAnimationFrame(e);return n(),{cancel:t}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e,t){window.navigator.msSaveBlob(e,t)}function o(e){var t=a.createObjectURL(e);window.location=t,setTimeout(function(){return a.revokeObjectURL(t)},l)}function u(e,t){var n=document.createElement("a"),o=a.createObjectURL(e);n.href=o,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){a.revokeObjectURL(o),document.body.removeChild(n)},l)}t.__esModule=!0;var a=window.URL||window.webkitURL,r="undefined"!=typeof document.createElement("a").download,i="undefined"!=typeof window.navigator.msSaveBlob,l=1e3,c=void 0;c=i?n:r?u:o,t.default=c},function(e,t){"use strict";function n(){var e=(new Date).toJSON(),t=e.replace("T"," ").replace("Z","");return"motion-detection"+t+".png"}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e){e.toBlob(function(e){return(0,r.default)(e,(0,l.default)())})}t.__esModule=!0,t.default=u;var a=n(15),r=o(a),i=n(16),l=o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=e.filter(function(e){return!e.hidden}).map(function(e){return(0,r.default)("label.control-item.control-item--"+e.type,[(0,r.default)("span.control-item__label",e.label),(0,l.default)(e,t).el])}),o=(0,r.default)(".controls",n);return{el:o}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a),i=n(21),l=o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=(0,r.default)("input.controls__input--boolean",{type:"checkbox",checked:e.value,onchange:function(n){return t(e.key,n.target.checked)}});return{el:n}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=(0,r.default)("input.controls__input--color",{type:"color",value:e.value,onchange:function(n){return t(e.key,n.target.value)}});return{el:n}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return v[e.type](e,t)}t.__esModule=!0,t.default=u;var a=n(19),r=o(a),i=n(22),l=o(i),c=n(23),d=o(c),f=n(20),s=o(f);n(31);var v={boolean:r.default,range:d.default,list:l.default,color:s.default}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=e.options.map(function(t){var n=t.value,o=t.label;return(0,r.default)("option",o,{value:n,selected:n===e.value})}),o=(0,r.default)("select.controls__input--list",n,{onchange:function(n){return t(e.key,n.target.value)}});return{el:o}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){function n(){var n=parseInt(u.value,10);o.textContent=n,t(e.key,n)}var o=(0,r.default)("span.control-item__range-value",e.value),u=(0,r.default)("input.controls__input--range",{type:"range",min:e.min,max:e.max,value:e.value,onchange:n}),a=(0,r.default)(".controls__input--range",[(0,r.default)(".control-item__range-values",[(0,r.default)("span.control-item__range-min",e.min),o,(0,r.default)("span.control-item__range-max",e.max)]),u]);return{el:a}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){function n(){o=!o,o?i.classList.add("is-expanded"):i.classList.remove("is-expanded")}var o=!1,u=(0,r.default)(".app-controls__content",(0,l.default)(e,t).el),a=(0,r.default)(".app-controls__toggle",(0,r.default)("span"),{onclick:n}),i=(0,r.default)(".app-sidebar",[u,a]);return{el:i}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a);n(32);var i=n(18),l=o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(){function e(){var e=Date.now(),u=(e-t)/i;t=e,n=Math.floor(1/u),o.textContent=n+" fps"}var t=Date.now(),n=0,o=(0,r.default)(".video-fps");return{el:o,update:e}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a);n(33);var i=1e3},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){function n(){if(d.update(),!e.getConfig().motionDetection)return u.hide();var t=e.compareFrame(l),n=t.changedData,o=t.isInMotion;return o?void(n.changed&&u.show(n)):u.hide()}function o(){var t=e.getConfig(),n=t.width,o=t.color,a=t.height,r=t.differ,i=t.quality;s.style.width=n+"px",l.width=n,l.height=a,u&&s.removeChild(u.el),u=(0,c.default)(r,o,n,a,i),s.appendChild(u.el)}var u=void 0,r=(0,i.default)("button.app-video__screeenshot","Screenshot",{onclick:function(){return(0,a.screenshot)(e.compareCanvas)}}),l=(0,i.default)("video.app-video__display",{onloadedmetadata:function(e){return e.target.play()},srcObject:t}),d=(0,f.default)(),s=(0,i.default)(".app-video",[l,d.el,r]);return o(),{el:s,updateConfig:o,updateMotion:n}}t.__esModule=!0,t.default=u;var a=n(2),r=n(1),i=o(r),l=n(29),c=o(l),d=n(25),f=o(d);n(35)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,o){function u(e){var u=e.pixels;i.style.display="block",l.fillStyle=c,l.clearRect(0,0,t,n);for(var a=0;a<u.length;a+=2)l.fillRect(u[a],u[a+1],o,o)}function a(){i.style.display="none"}var i=(0,r.default)("canvas.pixel-view",{width:t,height:n,style:{width:t+"px",height:n+"px"}}),l=i.getContext("2d"),c="rgba("+e.R+", "+e.G+", "+e.B+", 0.5)";return{el:i,show:u,hide:a}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e){function t(e){o.style.cssText="background:"+u+";height:"+e.height+"px;width:"+e.width+"px;left:"+e.left+"px;top:"+e.top+"px"}function n(){o.style.display="none"}var o=(0,r.default)(".rect-view"),u="rgba("+e.R+", "+e.G+", "+e.B+", 0.5)";return{el:o,show:t,hide:n}}t.__esModule=!0,t.default=u;var a=n(1),r=o(a)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,o,u){return d[e]((0,c.hexToRgb)(t),n,o,u)}t.__esModule=!0,t.default=u;var a=n(28),r=o(a),i=n(27),l=o(i),c=n(2);n(34);var d={1:r.default,2:l.default}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);