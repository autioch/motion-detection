!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";n(16),n(20)},function(e,t){e.exports=function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++)t(e[n[o]],n[o])}function a(e){return e&&(e.nodeName&&e.nodeType||e instanceof Text)}function r(){function e(e){for(var r=void 0,l=arguments.length,d=Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];if("string"==typeof e){var s=e.split("."),v=s[0],m=s.slice(1);r=document.createElement(""===v?"div":v),m.length&&(r.className=m.join(" "))}else r=document.createElement("div"),void 0!==e&&d.unshift(e);return n(d,function(e){Array.isArray(e)?n(e,function(e){return r.appendChild(a(e)?e:document.createTextNode(e))}):a(e)?r.appendChild(e):null!==e&&"object"===("undefined"==typeof e?"undefined":i(e))?o(e,function(e,n){"function"==typeof e?(r.addEventListener(n.substring(u),e,!1),t.push(function(){return r.removeEventListener(n.substring(u),e,!1)})):"style"===n?"string"==typeof e?r.style.cssText=e:o(e,function(e,t){var n=e.match(c);n?r.style.setProperty(t,n[1],"important"):r.style.setProperty(t,e)}):"attrs"===n?o(e,function(e,t){return r.setAttribute(t,e)}):r[n]=e}):r.appendChild(document.createTextNode(e))}),r}var t=[];return e.cleanup=function(){n(t,function(e){return e()}),t.length=0},e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=2,c=/(.*)\W+!important\W*$/;e.exports=r(),e.exports.context=r}])},function(e,t){},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.screenshot=t.detectorFactory=t.interval=t.config=t.getUserMedia=void 0;var a=n(7),r=o(a),i=n(8),u=o(i),c=n(5),l=o(c),d=n(15),f=o(d),s=n(9),v=o(s);t.getUserMedia=r.default,t.config=l.default,t.interval=u.default,t.detectorFactory=v.default,t.screenshot=f.default},function(e,t){"use strict";function n(){var e=window.innerWidth-o,t=window.innerHeight-o;return e>t&&(e=t/r),{min:Math.round(e*a),max:Math.round(e)}}t.__esModule=!0,t.default=n;var o=32,a=.1,r=.75},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(4),r=o(a),i=n(6),u=o(i),c=(0,r.default)(),l=c.min,d=c.max,f=.75;u.default.width.min=l,u.default.width.max=d,u.default.width.value=d,u.default.height.min=l,u.default.height.max=d,u.default.height.value=Math.floor(u.default.width.value*f);var s=Object.keys(u.default).reduce(function(e,t){return u.default[t].key=t,e[t]=u.default[t].value,e},{});t.default={schema:u.default,state:s}},function(e,t){"use strict";t.__esModule=!0,t.default={width:{label:"Video width",type:"range",min:128,max:640,value:640},height:{label:"Video height",type:"range",min:96,max:480,value:480,hidden:!0},motionDetection:{label:"Enable motion detection",type:"boolean",value:!0},marker:{label:"Marker type",type:"list",value:1,options:[{value:1,label:"Rectangle"},{value:2,label:"Pixel"}]},colorTolerance:{label:"Color difference tolerance",type:"range",min:0,max:255,value:50},timeTolerance:{label:"Short term noise tolerance",type:"range",min:1,max:1e3,value:500},quality:{label:"Difference simplicity",type:"range",min:1,max:10,value:1},compareCanvas:{label:"Show compare canvas",type:"boolean",value:!1},source:{label:"Video source",type:null,value:null,hidden:!0}}},function(e,t){"use strict";function n(e){return function(t){return e((window.URL||window.webkitURL).createObjectURL(t))}}function o(){return navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(a):navigator.getUserMedia?new Promise(function(e,t){return navigator.getUserMedia(a,e,t)}):navigator.webkitGetUserMedia?new Promise(function(e,t){return navigator.webkitGetUserMedia(a,n,t)}):navigator.mozGetUserMedia?new Promise(function(e,t){return navigator.mozGetUserMedia(a,n,t)}):Promise.reject(Error("Can not get user media."))}t.__esModule=!0,t.default=o;var a={video:!0}},function(e,t){"use strict";function n(e){function t(){cancelAnimationFrame(o)}function n(){o=requestAnimationFrame(n),e()}var o=requestAnimationFrame(e);return n(),{cancel:t}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){Object.assign(l,e),v=Math.floor(l.width/l.quality),m=Math.floor(l.height/l.quality),a.width=v,a.height=m,s=(0,i.default)(l,v,m)}function t(e){return r.clearRect(0,0,v,m),r.drawImage(e,0,0,v,m),r.getImageData(0,0,v,m).data}function n(e){var n=t(e),o=s(f,n),a=performance.now();return o.changed?a-u.lastStatic>l.timeTolerance&&(u.isInMotion=!0,u.lastMotion=a):a-u.lastMotion>l.timeTolerance&&(u.isInMotion&&(u.lastStatic=a),u.isInMotion=!1),f=n,u.changedData=o,o}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=document.createElement("canvas"),r=a.getContext("2d"),u=(0,c.default)(),l=(0,d.default)(),f=void 0,s=void 0,v=void 0,m=void 0;return e(o),f=r.getImageData(0,0,v,m).data,{updateConfig:e,compareFrame:n,getCanvas:function(){return a},getData:function(){return u.changedData}}}t.__esModule=!0,t.default=a;var r=n(10),i=o(r),u=n(12),c=o(u),l=n(11),d=o(l)},function(e,t){"use strict";function n(e,t,n){function i(){v=1/0,m=0,p=1/0,h=0,g=!1}function u(e){return e>d||e<-d}function c(e,t){e<p&&(p=e),e>h&&(h=e),t<v&&(v=t),t>m&&(m=t)}var l=e.quality,d=e.colorTolerance,f=t*o,s=f*n,v=void 0,m=void 0,p=void 0,h=void 0,g=void 0;return function(e,t){i();for(var n=0;n<s;n+=o)(u(e[n]-t[n])||u(e[n+r]-t[n+r])||u(e[n+a]-t[n+a]))&&(g=!0,c(n%f/o,Math.floor(n/f)));return{top:v*l,left:p*l,height:(m-v)*l,width:(h-p)*l,changed:g}}}t.__esModule=!0,t.default=n;var o=4,a=2,r=1},function(e,t){"use strict";function n(){return{width:640,height:480,colorTolerance:50,timeTolerance:500,quality:10}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(){return{isInMotion:!1,lastStatic:performance.now(),lastMotion:performance.now(),changedData:{}}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e,t){window.navigator.msSaveBlob(e,t)}function o(e){var t=r.createObjectURL(e);window.location=t,setTimeout(function(){return r.revokeObjectURL(t)},c)}function a(e,t){var n=document.createElement("a"),o=r.createObjectURL(e);n.href=o,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){r.revokeObjectURL(o),document.body.removeChild(n)},c)}t.__esModule=!0;var r=window.URL||window.webkitURL,i="undefined"!=typeof document.createElement("a").download,u="undefined"!=typeof window.navigator.msSaveBlob,c=1e3,l=void 0;l=u?n:i?a:o,t.default=l},function(e,t){"use strict";function n(){var e=(new Date).toLocaleString().replace(/(\.|, |:)/g,"-");return"motion-detection"+e+".png"}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){e.toBlob(function(e){return(0,i.default)(e,(0,c.default)())})}t.__esModule=!0,t.default=a;var r=n(13),i=o(r),u=n(14),c=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n(3),r=n(1),i=o(r),u=n(19),c=o(u),l=n(18),d=o(l),f=n(17),s=o(f);(0,a.getUserMedia)().then(function(e){var t=a.config.state,n=(0,a.detectorFactory)(t),o=(0,c.default)(),r=(0,s.default)(),u=(0,d.default)(n);document.body.appendChild((0,i.default)(".app__video",o.el,r.el,u.el)),o.update(t.width,t.height,e),(0,a.interval)(function(){return r.update(n.compareFrame(o.el))})})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){t.style.cssText=["display:"+(e.changed?"block":"none"),"height:"+e.height+"px","width:"+e.width+"px","left:"+e.left+"px","top:"+e.top+"px"].join(";")}var t=(0,i.default)(".rect-view");return{el:t,update:e}}t.__esModule=!0,t.default=a;var r=n(1),i=o(r);n(2)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,u.default)("button","Screenshot",{onclick:function(){return(0,r.screenshot)(e.getCanvas())}});return{el:t}}t.__esModule=!0,t.default=a;var r=n(3),i=n(1),u=o(i);n(2)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e,n,o){t.srcObject=o,t.width=e,t.height=n}var t=(0,i.default)("video",{onloadedmetadata:function(e){return e.target.play()}});return{el:t,update:e}}t.__esModule=!0,t.default=a;var r=n(1),i=o(r);n(2)},function(e,t){}]);