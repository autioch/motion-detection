!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n(12),u=o(a),r=n(3),i=n(2),l=n(23),c=o(l);n(31),(0,i.getUserMedia)().then(function(e){var t=(0,u.default)(r.config),n=Object.keys(r.schema).map(function(e){return r.schema[e]});(0,c.default)(t,e,n)}).catch(function(e){return alert(e.message)})},function(e,t){e.exports=function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++)t(e[n[o]],n[o])}function a(e){return e&&(e.nodeName&&e.nodeType||e instanceof Text)}function u(){function e(e){for(var u=void 0,c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];if("string"==typeof e){var s=e.split("."),v=s[0],p=s.slice(1);u=document.createElement(""===v?"div":v),p.length&&(u.className=p.join(" "))}else u=document.createElement("div"),void 0!==e&&d.unshift(e);return n(d,function(e){Array.isArray(e)?n(e,function(e){return u.appendChild(a(e)?e:document.createTextNode(e))}):a(e)?u.appendChild(e):null!==e&&"object"===("undefined"==typeof e?"undefined":r(e))?o(e,function(e,n){"function"==typeof e?(u.addEventListener(n.substring(i),e,!1),t.push(function(){return u.removeEventListener(n.substring(i),e,!1)})):"style"===n?"string"==typeof e?u.style.cssText=e:o(e,function(e,t){var n=e.match(l);n?u.style.setProperty(t,n[1],"important"):u.style.setProperty(t,e)}):"attrs"===n?o(e,function(e,t){return u.setAttribute(t,e)}):u[n]=e}):u.appendChild(document.createTextNode(e))}),u}var t=[];return e.cleanup=function(){n(t,function(e){return e()}),t.length=0},e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=2,l=/(.*)\W+!important\W*$/;e.exports=u(),e.exports.context=u}])},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.hexToRgb=t.download=t.screenshot=t.getUserMedia=t.interval=void 0;var a=n(15),u=o(a),r=n(13),i=o(r),l=n(16),c=o(l),d=n(4),f=o(d),s=n(14),v=o(s);t.interval=u.default,t.getUserMedia=i.default,t.screenshot=c.default,t.download=f.default,t.hexToRgb=v.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return l.default[t].key=t,e[t]=l.default[t].value,e}t.__esModule=!0,t.config=t.schema=void 0;var u=n(5),r=o(u),i=n(6),l=o(i),c=(0,r.default)(),d=c.minWidth,f=c.maxWidth,s=c.minHeight,v=c.maxHeight,p=c.width,h=c.height;l.default.width.min=d,l.default.width.max=f,l.default.width.value=p,l.default.height.min=s,l.default.height.max=v,l.default.height.value=h;var g=Object.keys(l.default).reduce(a,{});t.schema=l.default,t.config=g},function(e,t){"use strict";function n(e,t){window.navigator.msSaveBlob(e,t)}function o(e){var t=u.createObjectURL(e);window.location=t,setTimeout(function(){return u.revokeObjectURL(t)},l)}function a(e,t){var n=document.createElement("a"),o=u.createObjectURL(e);n.href=o,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){u.revokeObjectURL(o),document.body.removeChild(n)},l)}t.__esModule=!0;var u=window.URL||window.webkitURL,r="undefined"!=typeof document.createElement("a").download,i="undefined"!=typeof window.navigator.msSaveBlob,l=5e3,c=void 0;c=i?n:r?a:o,t.default=c},function(e,t){"use strict";function n(){var e=window.innerWidth-u,t=window.innerHeight-r;return e*a>t?e=Math.round(t/a):t=Math.round(e*a),{minWidth:Math.round(e*o),maxWidth:e,width:e,minHeight:Math.round(t*o),maxHeight:t,height:t}}t.__esModule=!0,t.default=n;var o=.1,a=.75,u=0,r=30},function(e,t){"use strict";t.__esModule=!0,t.default={width:{label:"Video width",type:"range",min:128,max:640,value:640},height:{label:"Video height",type:"range",min:96,max:480,value:480,hidden:!0},motionDetection:{label:"Detect motion",type:"boolean",value:!0},differ:{label:"Motion precision",type:"list",value:2,options:[{value:1,label:"Rectangle"},{value:2,label:"Pixel"}]},color:{label:"Motion color",type:"color",value:"#00ff00"},quality:{label:"Comparison inaccuracy",type:"range",min:1,max:20,value:10},colorTolerance:{label:"Color noise tolerance",type:"range",min:0,max:255,value:40},timeTolerance:{label:"Motion pause tolerance",type:"range",min:1,max:1e3,value:300},compareCanvas:{label:"Show compare canvas",type:"boolean",value:!1,hidden:!0},recordMotion:{label:"Record motion",type:"boolean",value:!1},recordTolerance:{label:"Record pause tolerance",type:"range",min:1,max:20,value:5}}},function(e,t,n){"use strict";function o(){return Object.assign({},a.config)}t.__esModule=!0,t.default=o;var a=n(3)},function(e,t){"use strict";function n(){return{isInMotion:!1,lastStatic:performance.now(),lastMotion:performance.now(),changedData:{}}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o){return c[o](e,t,n)}t.__esModule=!0,t.default=a;var u=n(11),r=o(u),i=n(10),l=o(i),c={1:r.default,2:l.default}},function(e,t){"use strict";function n(e,t,n){function r(){v=[]}function i(e){return e>d||e<-d}function l(e,t){v.push(e*c,t*c)}var c=e.quality,d=e.colorTolerance,f=t*o,s=f*n,v=void 0;return function(e,t){r();for(var n=0;n<s;n+=o)(i(e[n]-t[n])||i(e[n+u]-t[n+u])||i(e[n+a]-t[n+a]))&&l(n%f/o,Math.floor(n/f));return{changed:v.length>0,pixels:v}}}t.__esModule=!0,t.default=n;var o=4,a=2,u=1},function(e,t){"use strict";function n(e,t,n){function r(){v=1/0,p=0,h=1/0,g=0,m=!1}function i(e){return e>d||e<-d}function l(e,t){e<h&&(h=e),e>g&&(g=e),t<v&&(v=t),t>p&&(p=t)}var c=e.quality,d=e.colorTolerance,f=t*o,s=f*n,v=void 0,p=void 0,h=void 0,g=void 0,m=void 0;return function(e,t){r();for(var n=0;n<s;n+=o)(i(e[n]-t[n])||i(e[n+u]-t[n+u])||i(e[n+a]-t[n+a]))&&(m=!0,l(n%f/o,Math.floor(n/f)));return{top:v*c,left:h*c,height:(p-v)*c,width:(g-h)*c,changed:m}}}t.__esModule=!0,t.default=n;var o=4,a=2,u=1},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){Object.assign(c,e),c.height=Math.round(c.width*f),p=Math.floor(c.width/c.quality),h=Math.floor(c.height/c.quality),a.width=p,a.height=h,v=(0,r.default)(c,p,h,c.differ)}function t(e){return u.clearRect(0,0,p,h),u.drawImage(e,0,0,p,h),u.getImageData(0,0,p,h).data}function n(e){var n=t(e),o=v(s,n),a=performance.now();return o.changed?a-i.lastStatic>c.timeTolerance&&(i.isInMotion=!0,i.lastMotion=a):a-i.lastMotion>c.timeTolerance&&(i.isInMotion&&(i.lastStatic=a),i.isInMotion=!1),s=n,i.changedData=o,i}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=document.createElement("canvas"),u=a.getContext("2d"),i=(0,l.default)(),c=(0,d.default)(),s=void 0,v=void 0,p=void 0,h=void 0;return e(o),s=u.getImageData(0,0,p,h).data,{updateConfig:e,compareFrame:n,compareCanvas:a,getState:function(){return i},getConfig:function(){return c}}}t.__esModule=!0,t.default=a;var u=n(9),r=o(u),i=n(8),l=o(i),c=n(7),d=o(c),f=.75},function(e,t){"use strict";function n(e){return function(t){return e((window.URL||window.webkitURL).createObjectURL(t))}}function o(){return navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(a):navigator.getUserMedia?new Promise(function(e,t){return navigator.getUserMedia(a,e,t)}):navigator.webkitGetUserMedia?new Promise(function(e,t){return navigator.webkitGetUserMedia(a,n,t)}):navigator.mozGetUserMedia?new Promise(function(e,t){return navigator.mozGetUserMedia(a,n,t)}):Promise.reject(Error("Can not get user media."))}t.__esModule=!0,t.default=o;var a={video:!0}},function(e,t){"use strict";function n(e){return{R:parseInt(e[1]+e[2],16),G:parseInt(e[3]+e[4],16),B:parseInt(e[5]+e[6],16)}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e){function t(){cancelAnimationFrame(o)}function n(){o=requestAnimationFrame(n),e()}var o=requestAnimationFrame(e);return n(),{cancel:t}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){e.toBlob(function(e){return(0,r.default)(e,t)})}t.__esModule=!0,t.default=a;var u=n(4),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.filter(function(e){return!e.hidden}).map(function(e){return(0,r.default)("label.control-item.control-item--"+e.type,[(0,r.default)("span.control-item__label",e.label),(0,l.default)(e,t).el])}),o=(0,r.default)(".controls",n);return{el:o}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u),i=n(20),l=o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,r.default)("input.controls__input--boolean",{type:"checkbox",checked:e.value,onchange:function(n){return t(e.key,n.target.checked)}});return{el:n}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,r.default)("input.controls__input--color",{type:"color",value:e.value,onchange:function(n){return t(e.key,n.target.value)}});return{el:n}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return v[e.type](e,t)}t.__esModule=!0,t.default=a;var u=n(18),r=o(u),i=n(21),l=o(i),c=n(22),d=o(c),f=n(19),s=o(f);n(32);var v={boolean:r.default,range:d.default,list:l.default,color:s.default}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.options.map(function(t){var n=t.value,o=t.label;return(0,r.default)("option",o,{value:n,selected:n===e.value})}),o=(0,r.default)("select.controls__input--list",n,{onchange:function(n){return t(e.key,n.target.value)}});return{el:o}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){function n(){var n=parseInt(a.value,10);o.textContent=n,t(e.key,n)}var o=(0,r.default)("span.control-item__range-value",e.value),a=(0,r.default)("input.controls__input--range",{type:"range",min:e.min,max:e.max,value:e.value,onchange:n}),u=(0,r.default)(".controls__input--range",[(0,r.default)(".control-item__range-values",[(0,r.default)("span.control-item__range-min",e.min),o,(0,r.default)("span.control-item__range-max",e.max)]),a]);return{el:u}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){function o(t,n){var o;e.updateConfig((o={},o[t]=n,o)),a.updateConfig()}var a=(0,r.default)(e,t),u=(0,l.default)(n,o);c.appendChild(a.el),c.appendChild(u.el)}t.__esModule=!0,t.default=a;var u=n(26),r=o(u),i=n(24),l=o(i),c=document.body},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){function n(){o=!o,o?i.classList.add("is-expanded"):i.classList.remove("is-expanded")}var o=!1,a=(0,r.default)(".app-controls__content",(0,l.default)(e,t).el),u=(0,r.default)(".app-controls__toggle",(0,r.default)("span"),{onclick:n}),i=(0,r.default)(".app-sidebar",[a,u]);return{el:i}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u);n(33);var i=n(17),l=o(i)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){function e(){var e=Date.now(),a=(e-t)/i;t=e,n=Math.floor(1/a),o.textContent=n+" fps"}var t=Date.now(),n=0,o=(0,r.default)(".video-fps");return{el:o,update:e}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u);n(34);var i=1e3},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){function n(){var t=(new Date).toJSON(),n=t.replace("T"," ").replace("Z","");(0,u.screenshot)(e.compareCanvas,"motion\\screenshot-"+n+".png")}function o(){if(p.update(),!e.getConfig().motionDetection)return h.stopRecording(),void r.hide();var t=e.compareFrame(s),n=t.changedData,o=t.isInMotion;return o?(l&&h.startRecording(),void(n.changed&&r.show(n))):(h.stopRecording(),void r.hide())}function a(){var t=e.getConfig(),n=t.width,o=t.color,a=t.height,u=t.differ,i=t.quality,d=t.recordMotion;l=d,g.style.width=n+"px",s.width=n,s.height=a,r&&g.removeChild(r.el),r=(0,c.default)(u,o,n,a,i),g.appendChild(r.el)}var r=void 0,l=!1,d=(0,i.default)("button.app-video__screeenshot","Screenshot",{onclick:n}),s=(0,i.default)("video.app-video__display",{onloadedmetadata:function(e){return e.target.play()},srcObject:t}),p=(0,f.default)(),h=(0,v.default)(t,e.getConfig().recordTolerance),g=(0,i.default)(".app-video",[s,p.el,h.el,d]);return a(),(0,u.interval)(o),{el:g,updateConfig:a}}t.__esModule=!0,t.default=a;var u=n(2),r=n(1),i=o(r),l=n(29),c=o(l),d=n(25),f=o(d),s=n(30),v=o(s);n(37)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o){function a(e){var a=e.pixels;i.style.display="block",l.fillStyle=c,l.clearRect(0,0,t,n);for(var u=0;u<a.length;u+=2)l.fillRect(a[u],a[u+1],o,o)}function u(){i.style.display="none"}var i=(0,r.default)("canvas.pixel-view",{width:t,height:n,style:{width:t+"px",height:n+"px"}}),l=i.getContext("2d"),c="rgba("+e.R+", "+e.G+", "+e.B+", 0.5)";return{el:i,show:a,hide:u}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(e){o.style.cssText="background:"+a+";height:"+e.height+"px;width:"+e.width+"px;left:"+e.left+"px;top:"+e.top+"px"}function n(){o.style.display="none"}var o=(0,r.default)(".rect-view"),a="rgba("+e.R+", "+e.G+", "+e.B+", 0.5)";return{el:o,show:t,hide:n}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,a){return d[e]((0,c.hexToRgb)(t),n,o,a)}t.__esModule=!0,t.default=a;var u=n(28),r=o(u),i=n(27),l=o(i),c=n(2);n(35);var d={1:r.default,2:l.default}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){function n(){var e=new Blob(s,{type:"video/webm"}),t=Math.round((p.getTime()-v.getTime())/l),n="motion "+v.toLocaleString()+"  "+t+"s.webm";(0,i.download)(e,n),d.textContent=n,s=[],f=null}function o(){h&&clearTimeout(h),h=null}function a(){o(),d.textContent="Recording...",f||(v=new Date,f=new MediaRecorder(e),f.onstop=n,f.ondataavailable=function(e){return s.push(e.data)},f.start(10))}function u(){f&&"recording"===f.state&&(d.textContent="Recording stopped.",f.stop(),p=new Date)}function c(){!h&&f&&"recording"===f.state&&(d.textContent="Recording waiting...",h=setTimeout(u,t*l))}var d=(0,r.default)(".recorder"),f=void 0,s=[],v=void 0,p=void 0,h=void 0;return{el:d,startRecording:a,stopRecording:c}}t.__esModule=!0,t.default=a;var u=n(1),r=o(u),i=n(2);n(36);var l=1e3},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);